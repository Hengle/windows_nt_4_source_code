!if "$(NTMAKEENV)" != "" 
#
# DO NOT EDIT THIS FILE!!!  Edit .\sources. if you want to add a new source
# file to this component.  This file merely indirects to the real make file
# that is shared by all the components of NT OS/2
#
!INCLUDE $(NTMAKEENV)\makefile.def


!else
###############################################################################
#
#  Microsoft Confidential
#  Copyright (C) Microsoft Corporation 1995
#  All Rights Reserved.
#
#  MSMosaic makefile
#
###############################################################################


####################
# macro definitions
####################

ROOT              = ..\..\..\..
OHARE_ROOT        = ..\..

!ifndef IE_CORE_SRC_DIR
IE_CORE_SRC_DIR        = ..\core
!endif

!ifndef SHARED_DIR
SHARED_DIR       = ..\core
!endif

SECURITY_DIR      = ..\security\include
!ifndef SHELL_DIR
SHELL_DIR         = $(ROOT)\win\shell\inc
!endif
INC16_DIR         = $(ROOT)\dev\inc16
URL_DIR           = $(OHARE_ROOT)\url

BASE_NAME         = iexplore
RES_DIR 		  = (IE_CORE_SRC_DIR)\resource

#JPEGLIB           = Y

# FEATURE_OCX       = Y

!ifndef BUILD
BUILD             = debug
!endif

!ifdef DBCS
BASE_ADDRESS      = @$(OHARE_ROOT)\ohdbcs.txt,$(BASE_NAME)
!endif

LIBS              = kernel32.lib gdi32.lib user32.lib advapi32.lib winmm.lib 
!if "$(PROFILE)" == "on"
LIBS              = $(LIBS) $(OHARE_ROOT)\lib\debug\icap.lib msvcrt.lib
!endif
LIBS              = $(LIBS) libcmt.lib uuid.lib shell32.lib comctl32.lib
LIBS              = $(LIBS) url.lib $(OHARE_ROOT)\lib\rsa32.lib
LIBS              = $(LIBS) $(OHARE_ROOT)\lib\wsock32.lib
LIBS              = $(LIBS) $(OHARE_ROOT)\lib\ssl.lib
LIBS              = $(LIBS) $(OHARE_ROOT)\lib\crypto.lib
!ifdef DBCS 
LIBS              = $(LIBS) $(OHARE_ROOT)\ie\fechrcnv\retail\fechrcnv.lib
!endif
!ifdef JPEGLIB
LIBS              = $(LIBS) ..\jpeglib\jpeglib.lib
!endif
!ifdef FEATURE_OCX
LIBS              = $(LIBS) oleaut32.lib
!endif
!if "$(BUILD)" == "debug"
LIBS              = $(LIBS) ..\xx_debug\debug\xx_debug.lib
LIBS              = $(LIBS) $(OHARE_ROOT)\lib\debug\mssfchek.lib
!else 
LIBS              = $(LIBS) $(OHARE_ROOT)\lib\retail\mssfchek.lib
!endif

PCH_C_INCLUDE     = all.h

EXT_INCLUDE       = ..\xx_debug;$(IE_CORE_SRC_DIR);$(SECURITY_DIR);$(SHELL_DIR);.;$(URL_DIR);$(INC16_DIR)

!ifdef DBCS
EXT_INCLUDE       = $(EXT_INCLUDE);$(OHARE_ROOT)\ie\fechrcnv
!endif

!ifdef JPEGLIB
EXT_INCLUDE       = ..\jpeglib;$(EXT_INCLUDE)
!endif


EXT_C_SWITCHES    = -Gz -Op -W3

EXT_DEFINES       = -D_MT \
                    -D__STDC__ \
                    -DWIN32_I386 \
                    -DWIN32_BUFFERED \
                    -D_WINDOWS \
                    -DNO_GROUPS \
                    -DACCESS_AUTH \
                    -DIEXPLORER_DOESNT_CHECK_HEAP_RETURN_VALUES \
                    -DCOOKIES \
                    -DMIME \
                    -DNT_WARNING

EXT_DEFINES       = $(EXT_DEFINES) \
                    -DFEATURE_NEW_PAGESETUPDLG \
                    -DFEATURE_TOOLBAR \
                    -DFEATURE_JPEG \
                    -DHTTPS_ACCESS_TYPE \
                    -DFEATURE_IMAGE_VIEWER \
                    -DFEATURE_SOUND_PLAYER \
                    -DFEATURE_CLIENT_IMAGEMAP \
                    -DFEATURE_SPM \
                    -DFEATURE_IMG_THREADS \
                    -DFEATURE_IAPI \
                    -DFEATURE_IMG_INLINE \
                    -DFEATURE_NEWSREADER \
					-DFEATURE_KEEPALIVE	\
#                    -DTEST_DCACHE_OPTIONS
#                    -DFEATURE_SUPPORT_UNWRAPPING
#                    -DFEATURE_SUPPORT_WRAPPING
!ifdef FEATURE_OCX
                    -DFEATURE_OCX \
!endif
                    -DFEATURE_VRML

!if "$(MY_FLAGS)" != ""
EXT_DEFINES = $(EXT_DEFINES) -D$(MY_FLAGS)
!endif

!if "$(BUILD)" == "debug"
EXT_DEFINES       = $(EXT_DEFINES) -DVSTF -D_DEBUG -DXX_DEBUG -DXX_DEBUG_WIN32GUI -DFEATURE_TESTHOOK
!  ifdef AUDIT
EXT_DEFINES       = $(EXT_DEFINES) -DAUDIT
!  else
EXT_DEFINES       = $(EXT_DEFINES) -DGTR_MEM_STATS
!  endif
!endif

!if "$(PROFILE)" == "on"
EXT_DEFINES       = $(EXT_DEFINES) -DPROFILE
!endif

!ifdef DBCS
EXT_DEFINES       = $(EXT_DEFINES) -DDBCS -D$(DBCS)
!endif

EXT_DEFINES       = $(EXT_DEFINES:  = )

#EXT_TARGETS       = $(DEST_DIR)\$(BASE_NAME).ini
!if "$(BUILD)" == "debug"
EXT_TARGETS       = $(EXT_TARGETS) ..\xx_debug\xx_debug.lib
!endif

!ifdef DBCS
EXT_TARGETS       = $(EXT_TARGETS) ..\fechrcnv\fechrcnv.lib
!endif

!ifdef JPEGLIB
EXT_TARGETS       = $(EXT_TARGETS) ..\jpeglib\jpeglib.lib
!endif

CERN_C_SRC        = $(IE_CORE_SRC_DIR)\htbtree.c \
                    $(IE_CORE_SRC_DIR)\htchunk.c \
                    $(IE_CORE_SRC_DIR)\htfile.c \
                    $(IE_CORE_SRC_DIR)\htformat.c \
                    $(IE_CORE_SRC_DIR)\htinit.c \
                    $(IE_CORE_SRC_DIR)\htlist.c \
                    $(IE_CORE_SRC_DIR)\html.c \
                    $(IE_CORE_SRC_DIR)\htmlpdtd.c \
                    $(IE_CORE_SRC_DIR)\htparse.c \
                    $(IE_CORE_SRC_DIR)\htplain.c \
                    $(IE_CORE_SRC_DIR)\htstring.c \
                    $(IE_CORE_SRC_DIR)\sgml.c

CERN_C_OBJ        = $(DEST_DIR)\htbtree.obj \
                    $(DEST_DIR)\htchunk.obj \
                    $(DEST_DIR)\htfile.obj \
                    $(DEST_DIR)\htformat.obj \
                    $(DEST_DIR)\htinit.obj \
                    $(DEST_DIR)\htlist.obj \
                    $(DEST_DIR)\html.obj \
                    $(DEST_DIR)\htmlpdtd.obj \
                    $(DEST_DIR)\htparse.obj \
                    $(DEST_DIR)\htplain.obj \
                    $(DEST_DIR)\htstring.obj \
                    $(DEST_DIR)\sgml.obj

SHARED_C_SRC      = $(IE_CORE_SRC_DIR)\aiff.c \
                    $(IE_CORE_SRC_DIR)\async.c \
                    $(IE_CORE_SRC_DIR)\au.c \
                    $(IE_CORE_SRC_DIR)\blob.c \
                    $(IE_CORE_SRC_DIR)\charstrm.c \
                    $(IE_CORE_SRC_DIR)\cookie.c \
                    $(IE_CORE_SRC_DIR)\dcache.c \
                    $(IE_CORE_SRC_DIR)\dumpanch.c \
                    $(IE_CORE_SRC_DIR)\gtrutil.c \
                    $(IE_CORE_SRC_DIR)\guitar.c \
                    $(IE_CORE_SRC_DIR)\guiterrs.c \
                    $(IE_CORE_SRC_DIR)\guitfind.c \
                    $(IE_CORE_SRC_DIR)\hash.c \
                    $(IE_CORE_SRC_DIR)\htaccess.c \
                    $(IE_CORE_SRC_DIR)\htanchor.c \
                    $(IE_CORE_SRC_DIR)\htatom.c \
                    $(IE_CORE_SRC_DIR)\htext.c \
                    $(IE_CORE_SRC_DIR)\htftp.c \
                    $(IE_CORE_SRC_DIR)\htghist.c \
                    $(IE_CORE_SRC_DIR)\htgif.c \
                    $(IE_CORE_SRC_DIR)\htgopher.c \
                    $(IE_CORE_SRC_DIR)\htheader.c \
                    $(IE_CORE_SRC_DIR)\hthotlst.c \
                    $(IE_CORE_SRC_DIR)\htnews.c \
                    $(IE_CORE_SRC_DIR)\htregmng.c \
                    $(IE_CORE_SRC_DIR)\htspm.c \
                    $(IE_CORE_SRC_DIR)\htspmui.c \
                    $(IE_CORE_SRC_DIR)\httcp.c \
                    $(IE_CORE_SRC_DIR)\http_spm.c \
                    $(IE_CORE_SRC_DIR)\htxbm.c \
                    $(IE_CORE_SRC_DIR)\imgcache.c \
!ifndef JPEGLIB
                    $(IE_CORE_SRC_DIR)\jcomapi.c \
                    $(IE_CORE_SRC_DIR)\jdapi.c \
                    $(IE_CORE_SRC_DIR)\jdatasrc.c \
                    $(IE_CORE_SRC_DIR)\jdcoefct.c \
                    $(IE_CORE_SRC_DIR)\jdcolor.c \
                    $(IE_CORE_SRC_DIR)\jddctmgr.c \
                    $(IE_CORE_SRC_DIR)\jdhuff.c \
                    $(IE_CORE_SRC_DIR)\jdmainct.c \
                    $(IE_CORE_SRC_DIR)\jdmarker.c \
                    $(IE_CORE_SRC_DIR)\jdmaster.c \
                    $(IE_CORE_SRC_DIR)\jdmerge.c \
                    $(IE_CORE_SRC_DIR)\jdpostct.c \
                    $(IE_CORE_SRC_DIR)\jdsample.c \
                    $(IE_CORE_SRC_DIR)\jerror.c \
                    $(IE_CORE_SRC_DIR)\jidctfst.c \
                    $(IE_CORE_SRC_DIR)\jidctred.c \
                    $(IE_CORE_SRC_DIR)\jmemansi.c \
                    $(IE_CORE_SRC_DIR)\jmemmgr.c \
                    $(IE_CORE_SRC_DIR)\jquant1.c \
                    $(IE_CORE_SRC_DIR)\jquant2.c \
                    $(IE_CORE_SRC_DIR)\jutils.c \
!endif
                    $(IE_CORE_SRC_DIR)\loaddoc.c \
                    $(IE_CORE_SRC_DIR)\mapcache.c \
                    $(IE_CORE_SRC_DIR)\plain.c \
                    $(IE_CORE_SRC_DIR)\present.c \
                    $(IE_CORE_SRC_DIR)\reformat.c \
                    $(IE_CORE_SRC_DIR)\sem.c \
                    $(IE_CORE_SRC_DIR)\statesec.c \
                    $(IE_CORE_SRC_DIR)\styles.c \
                    $(IE_CORE_SRC_DIR)\tempfile.c \
                    $(IE_CORE_SRC_DIR)\unwrap.c \
                    $(IE_CORE_SRC_DIR)\wrap.c \
                    $(IE_CORE_SRC_DIR)\xbm.c

SHARED_C_OBJ      = $(DEST_DIR)\aiff.obj \
                    $(DEST_DIR)\async.obj \
                    $(DEST_DIR)\au.obj \
                    $(DEST_DIR)\blob.obj \
                    $(DEST_DIR)\charstrm.obj \
                    $(DEST_DIR)\cookie.obj \
                    $(DEST_DIR)\dcache.obj \
                    $(DEST_DIR)\dumpanch.obj \
                    $(DEST_DIR)\gtrutil.obj \
                    $(DEST_DIR)\guitar.obj \
                    $(DEST_DIR)\guiterrs.obj \
                    $(DEST_DIR)\guitfind.obj \
                    $(DEST_DIR)\hash.obj \
                    $(DEST_DIR)\htaccess.obj \
                    $(DEST_DIR)\htanchor.obj \
                    $(DEST_DIR)\htatom.obj \
                    $(DEST_DIR)\htext.obj \
                    $(DEST_DIR)\htftp.obj \
                    $(DEST_DIR)\htghist.obj \
                    $(DEST_DIR)\htgif.obj \
                    $(DEST_DIR)\htgopher.obj \
                    $(DEST_DIR)\htheader.obj \
                    $(DEST_DIR)\hthotlst.obj \
                    $(DEST_DIR)\htregmng.obj \
                    $(DEST_DIR)\htnews.obj \
                    $(DEST_DIR)\htspm.obj \
                    $(DEST_DIR)\htspmui.obj \
                    $(DEST_DIR)\httcp.obj \
                    $(DEST_DIR)\http_spm.obj \
                    $(DEST_DIR)\htxbm.obj \
                    $(DEST_DIR)\imgcache.obj \
!ifndef JPEGLIB
                    $(DEST_DIR)\jcomapi.obj \
                    $(DEST_DIR)\jdapi.obj \
                    $(DEST_DIR)\jdatasrc.obj \
                    $(DEST_DIR)\jdcoefct.obj \
                    $(DEST_DIR)\jdcolor.obj \
                    $(DEST_DIR)\jddctmgr.obj \
                    $(DEST_DIR)\jdhuff.obj \
                    $(DEST_DIR)\jdmainct.obj \
                    $(DEST_DIR)\jdmarker.obj \
                    $(DEST_DIR)\jdmaster.obj \
                    $(DEST_DIR)\jdmerge.obj \
                    $(DEST_DIR)\jdpostct.obj \
                    $(DEST_DIR)\jdsample.obj \
                    $(DEST_DIR)\jerror.obj \
                    $(DEST_DIR)\jidctfst.obj \
                    $(DEST_DIR)\jidctred.obj \
                    $(DEST_DIR)\jmemansi.obj \
                    $(DEST_DIR)\jmemmgr.obj \
                    $(DEST_DIR)\jquant1.obj \
                    $(DEST_DIR)\jquant2.obj \
                    $(DEST_DIR)\jutils.obj \
!endif
                    $(DEST_DIR)\loaddoc.obj \
                    $(DEST_DIR)\mapcache.obj \
                    $(DEST_DIR)\plain.obj \
                    $(DEST_DIR)\present.obj \
                    $(DEST_DIR)\reformat.obj \
                    $(DEST_DIR)\sem.obj \
                    $(DEST_DIR)\styles.obj \
                    $(DEST_DIR)\statesec.obj \
                    $(DEST_DIR)\tempfile.obj \
                    $(DEST_DIR)\unwrap.obj \
                    $(DEST_DIR)\wrap.obj \
                    $(DEST_DIR)\xbm.obj

WIN32_C_SRC       = $(IE_CORE_SRC_DIR)\bitmaps.c \
                    $(IE_CORE_SRC_DIR)\btn_anim.c \
                    $(IE_CORE_SRC_DIR)\fetch.c \
                    $(IE_CORE_SRC_DIR)\midi.c \
# deadcode          $(IE_CORE_SRC_DIR)\btn_push.c \
                    $(IE_CORE_SRC_DIR)\contmenu.c \
                    $(IE_CORE_SRC_DIR)\decoder.c \
                    $(IE_CORE_SRC_DIR)\dlg_abou.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_clr.c \
                    $(IE_CORE_SRC_DIR)\dlg_dflt.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_dir.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_edit.c \
                    $(IE_CORE_SRC_DIR)\dlg_err.c \
                    $(IE_CORE_SRC_DIR)\dlg_find.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_hot.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_html.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_mime.c \
                    $(IE_CORE_SRC_DIR)\dlg_open.c \
                    $(IE_CORE_SRC_DIR)\dlg_page.c \
                    $(IE_CORE_SRC_DIR)\dlg_post.c \
                    $(IE_CORE_SRC_DIR)\dlg_pref.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_prmp.c \
                    $(IE_CORE_SRC_DIR)\dlg_prnt.c \
                    $(IE_CORE_SRC_DIR)\dlg_safe.c \
                    $(IE_CORE_SRC_DIR)\dlg_save.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_selw.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_simp.c \
                    $(IE_CORE_SRC_DIR)\dlg_ssl.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_sty.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_temp.c \
                    $(IE_CORE_SRC_DIR)\dlg_unk.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_view.c \
# deadcode          $(IE_CORE_SRC_DIR)\dlg_winf.c \
                    $(IE_CORE_SRC_DIR)\draw.c \
# deadcode          $(IE_CORE_SRC_DIR)\effect3d.c \
                    $(IE_CORE_SRC_DIR)\gif.c \
                    $(IE_CORE_SRC_DIR)\globals.c \
                    $(IE_CORE_SRC_DIR)\gwc_base.c \
# deadcode          $(IE_CORE_SRC_DIR)\gwc_ddl.c \
# deadcode          $(IE_CORE_SRC_DIR)\gwc_ed.c \
# deadcode          $(IE_CORE_SRC_DIR)\gwc_html.c \
# deadcode          $(IE_CORE_SRC_DIR)\gwc_menu.c \
                    $(IE_CORE_SRC_DIR)\htfwrite.c \
                    $(IE_CORE_SRC_DIR)\htmlutil.c \
                    $(IE_CORE_SRC_DIR)\htspm_os.c \
                    $(IE_CORE_SRC_DIR)\jpeg.c \
!ifdef JPEGLIB
                    $(IE_CORE_SRC_DIR)\jdatasrc.c \
                    $(IE_CORE_SRC_DIR)\jerror.c \
!endif
                    $(IE_CORE_SRC_DIR)\main.c \
                    $(IE_CORE_SRC_DIR)\marquee.c \
                    $(IE_CORE_SRC_DIR)\mci.c \
                    $(IE_CORE_SRC_DIR)\mdft.c \
                    $(IE_CORE_SRC_DIR)\mime.c \
                    $(IE_CORE_SRC_DIR)\olepig.c \
                    $(IE_CORE_SRC_DIR)\prefs.c \
                    $(IE_CORE_SRC_DIR)\safestrm.c \
                    $(IE_CORE_SRC_DIR)\tw_print.c \
                    $(IE_CORE_SRC_DIR)\vrml.c \
                    $(IE_CORE_SRC_DIR)\w32cmd.c \
                    $(IE_CORE_SRC_DIR)\w32dde.c \
                    $(IE_CORE_SRC_DIR)\w32error.c \
                    $(IE_CORE_SRC_DIR)\w32forms.c \
                    $(IE_CORE_SRC_DIR)\w32mdi.c \
                    $(IE_CORE_SRC_DIR)\w32menu.c \
                    $(IE_CORE_SRC_DIR)\w32net.c \
                    $(IE_CORE_SRC_DIR)\w32sound.c \
                    $(IE_CORE_SRC_DIR)\w32util.c \
                    $(IE_CORE_SRC_DIR)\w32wait.c \
                    $(IE_CORE_SRC_DIR)\w_close.c \
                    $(IE_CORE_SRC_DIR)\w_hidden.c \
                    $(IE_CORE_SRC_DIR)\w_pal.c \
                    $(IE_CORE_SRC_DIR)\w_splash.c \
                    $(IE_CORE_SRC_DIR)\w_style.c \
                    $(IE_CORE_SRC_DIR)\w_void.c \
                    $(IE_CORE_SRC_DIR)\wc_bhbar.c \
                    $(IE_CORE_SRC_DIR)\wc_frame.c \
                    $(IE_CORE_SRC_DIR)\wc_html.c \
                    $(IE_CORE_SRC_DIR)\wc_tbar.c \
                    $(IE_CORE_SRC_DIR)\winview.c \
                    $(IE_CORE_SRC_DIR)\ws_dll.c 

WIN32_C_OBJ       = $(DEST_DIR)\bitmaps.obj \
                    $(DEST_DIR)\btn_anim.obj \
                    $(DEST_DIR)\fetch.obj \
                    $(DEST_DIR)\midi.obj \
# deadcode          $(DEST_DIR)\btn_push.obj \
                    $(DEST_DIR)\contmenu.obj \
                    $(DEST_DIR)\decoder.obj \
                    $(DEST_DIR)\dlg_abou.obj \
# deadcode          $(DEST_DIR)\dlg_clr.obj \
                    $(DEST_DIR)\dlg_dflt.obj \
# deadcode          $(DEST_DIR)\dlg_dir.obj \
# deadcode          $(DEST_DIR)\dlg_edit.obj \
                    $(DEST_DIR)\dlg_err.obj \
                    $(DEST_DIR)\dlg_find.obj \
# deadcode          $(DEST_DIR)\dlg_hot.obj \
# deadcode          $(DEST_DIR)\dlg_html.obj \
# deadcode          $(DEST_DIR)\dlg_mime.obj \
                    $(DEST_DIR)\dlg_open.obj \
                    $(DEST_DIR)\dlg_page.obj \
                    $(DEST_DIR)\dlg_post.obj \
                    $(DEST_DIR)\dlg_pref.obj \
# deadcode          $(DEST_DIR)\dlg_prmp.obj \
                    $(DEST_DIR)\dlg_prnt.obj \
                    $(DEST_DIR)\dlg_safe.obj \
                    $(DEST_DIR)\dlg_save.obj \
# deadcode          $(DEST_DIR)\dlg_selw.obj \
# deadcode          $(DEST_DIR)\dlg_simp.obj \
                    $(DEST_DIR)\dlg_ssl.obj \
# deadcode          $(DEST_DIR)\dlg_sty.obj \
# deadcode          $(DEST_DIR)\dlg_temp.obj \
                    $(DEST_DIR)\dlg_unk.obj \
# deadcode          $(DEST_DIR)\dlg_view.obj \
# deadcode          $(DEST_DIR)\dlg_winf.obj \
                    $(DEST_DIR)\draw.obj \
# deadcode          $(DEST_DIR)\effect3d.obj \
                    $(DEST_DIR)\gif.obj \
                    $(DEST_DIR)\globals.obj \
                    $(DEST_DIR)\gwc_base.obj \
# deadcode          $(DEST_DIR)\gwc_ddl.obj \
# deadcode          $(DEST_DIR)\gwc_ed.obj \
# deadcode          $(DEST_DIR)\gwc_html.obj \
# deadcode          $(DEST_DIR)\gwc_menu.obj \
                    $(DEST_DIR)\htfwrite.obj \
                    $(DEST_DIR)\htmlutil.obj \
                    $(DEST_DIR)\htspm_os.obj \
                    $(DEST_DIR)\jpeg.obj \
!ifdef JPEGLIB
                    $(DEST_DIR)\jdatasrc.obj \
                    $(DEST_DIR)\jerror.obj \
!endif
                    $(DEST_DIR)\main.obj \
                    $(DEST_DIR)\marquee.obj \
                    $(DEST_DIR)\mci.obj \
                    $(DEST_DIR)\mdft.obj \
                    $(DEST_DIR)\mime.obj \
                    $(DEST_DIR)\olepig.obj \
                    $(DEST_DIR)\prefs.obj \
                    $(DEST_DIR)\safestrm.obj \
                    $(DEST_DIR)\tw_print.obj \
                    $(DEST_DIR)\vrml.obj \
                    $(DEST_DIR)\w32cmd.obj \
                    $(DEST_DIR)\w32dde.obj \
                    $(DEST_DIR)\w32error.obj \
                    $(DEST_DIR)\w32forms.obj \
                    $(DEST_DIR)\w32mdi.obj \
                    $(DEST_DIR)\w32menu.obj \
                    $(DEST_DIR)\w32net.obj \
                    $(DEST_DIR)\w32sound.obj \
                    $(DEST_DIR)\w32util.obj \
                    $(DEST_DIR)\w32wait.obj \
                    $(DEST_DIR)\w_close.obj \
                    $(DEST_DIR)\w_hidden.obj \
                    $(DEST_DIR)\w_pal.obj \
                    $(DEST_DIR)\w_splash.obj \
                    $(DEST_DIR)\w_style.obj \
                    $(DEST_DIR)\w_void.obj \
                    $(DEST_DIR)\wc_bhbar.obj \
                    $(DEST_DIR)\wc_frame.obj \
                    $(DEST_DIR)\wc_html.obj \
                    $(DEST_DIR)\wc_tbar.obj \
                    $(DEST_DIR)\winview.obj \
                    $(DEST_DIR)\ws_dll.obj

URL_C_SRC         = $(URL_DIR)\comc.c \
                    $(URL_DIR)\memmgr.c

!if "$(BUILD)" == "debug"
URL_C_SRC         = $(URL_C_SRC) \
                    $(URL_DIR)\debspew.c \
                    $(URL_DIR)\inifile.c \
                    $(URL_DIR)\olevalid.c \
                    $(URL_DIR)\resstr.c \
                    $(URL_DIR)\shlvalid.c \
                    $(URL_DIR)\valid.c
!endif

URL_C_OBJ         = $(DEST_DIR)\comc.obj \
                    $(DEST_DIR)\memmgr.obj

!if "$(BUILD)" == "debug"
URL_C_OBJ         = $(URL_C_OBJ) \
                    $(DEST_DIR)\debspew.obj \
                    $(DEST_DIR)\inifile.obj \
                    $(DEST_DIR)\olevalid.obj \
                    $(DEST_DIR)\resstr.obj \
                    $(DEST_DIR)\shlvalid.obj \
                    $(DEST_DIR)\valid.obj
!endif

C_SRC             = $(CERN_C_SRC) \
                    $(SHARED_C_SRC) \
                    $(URL_C_SRC) \
                    $(WIN32_C_SRC) \
                    version.c

C_SRC             = $(C_SRC:  = )

C_OBJ             = $(CERN_C_OBJ) \
                    $(SHARED_C_OBJ) \
                    $(URL_C_OBJ) \
                    $(WIN32_C_OBJ) \
                    $(DEST_DIR)\version.obj

C_OBJ             = $(C_OBJ:  = )

WIN32_CPP_SRC     = $(IE_CORE_SRC_DIR)\dataobjm.cpp \
                    $(IE_CORE_SRC_DIR)\drag.cpp \
                    $(IE_CORE_SRC_DIR)\drop.cpp \
!ifdef FEATURE_OCX
                    $(IE_CORE_SRC_DIR)\iocs.cpp \
                    $(IE_CORE_SRC_DIR)\ioctls.cpp \
                    $(IE_CORE_SRC_DIR)\ias.cpp \
                    $(IE_CORE_SRC_DIR)\ioips.cpp \
                    $(IE_CORE_SRC_DIR)\ioipf.cpp \
                    $(IE_CORE_SRC_DIR)\csite.cpp \
                    $(IE_CORE_SRC_DIR)\contain.cpp \
                    $(IE_CORE_SRC_DIR)\ioc.cpp \
                    $(IE_CORE_SRC_DIR)\ieu.cpp \
                    $(IE_CORE_SRC_DIR)\clist.cpp \
                    $(IE_CORE_SRC_DIR)\xobj.cpp \
                    $(IE_CORE_SRC_DIR)\ambient.cpp \
                    $(IE_CORE_SRC_DIR)\helpers.cpp \
!endif
                    $(IE_CORE_SRC_DIR)\gendatao.cpp


WIN32_CPP_OBJ     = $(DEST_DIR)\dataobjm.obj \
                    $(DEST_DIR)\drag.obj \
                    $(DEST_DIR)\drop.obj \
!ifdef FEATURE_OCX
                    $(DEST_DIR)\iocs.obj \
                    $(DEST_DIR)\ioctls.obj \
                    $(DEST_DIR)\ias.obj \
                    $(DEST_DIR)\ioips.obj \
                    $(DEST_DIR)\ioipf.obj \
                    $(DEST_DIR)\csite.obj \
                    $(DEST_DIR)\contain.obj \
                    $(DEST_DIR)\ioc.obj     \
                    $(DEST_DIR)\ieu.obj     \
                    $(DEST_DIR)\clist.obj \
                    $(DEST_DIR)\xobj.obj \
                    $(DEST_DIR)\ambient.obj \
                    $(DEST_DIR)\helpers.obj \
!endif
                    $(DEST_DIR)\gendatao.obj

URL_CPP_SRC       = $(URL_DIR)\comcpp.cpp \
                    $(URL_DIR)\enumfmte.cpp \
                    $(URL_DIR)\refcount.cpp

URL_CPP_OBJ       = $(DEST_DIR)\comcpp.obj \
                    $(DEST_DIR)\enumfmte.obj \
                    $(DEST_DIR)\refcount.obj

CPP_SRC           = $(WIN32_CPP_SRC) \
                    $(URL_CPP_SRC)

CPP_SRC           = $(CPP_SRC:  = )

CPP_OBJ           = $(WIN32_CPP_OBJ) \
                    $(URL_CPP_OBJ)

CPP_OBJ           = $(CPP_OBJ:  = )

SRC               = $(C_SRC) $(CPP_SRC)


#################
# common headers
#################

!include $(OHARE_ROOT)\ohare.mk
!include $(OHARE_ROOT)\win32.mk


##################
# inference rules
##################

{$(URL_DIR)}.c{$(DEST_DIR)}.obj:
   @$(CL) @<<
$(CL_SWITCHES) $(DEFINES) -Yuproject.h -Fp$(PCH_C_PCH) -Fo$@ $<
<<

{$(IE_CORE_SRC_DIR)}.c{$(DEST_DIR)}.obj:
   @$(CL) @<<
$(CL_SWITCHES) $(DEFINES) -Yu$(PCH_C_INCLUDE) -Fp$(PCH_C_PCH) -Fo$@ $<
<<

{$(URL_DIR)}.cpp{$(DEST_DIR)}.obj:
   @$(CL) @<<
$(CL_SWITCHES) $(DEFINES) -Yu$(PCH_CPP_INCLUDE) -Fp$(PCH_CPP_PCH) -Fo$@ $<
<<

{$(IE_CORE_SRC_DIR)}.c{$(DEST_DIR)}.obj:
   @$(CL) @<<
$(CL_SWITCHES) $(DEFINES) -Yu$(PCH_C_INCLUDE) -Fp$(PCH_C_PCH) -Fo$@ $<
<<

{$(IE_CORE_SRC_DIR)}.cpp{$(DEST_DIR)}.obj:
   @$(CL) @<<
$(CL_SWITCHES) $(DEFINES) -Yu$(PCH_CPP_INCLUDE) -Fp$(PCH_CPP_PCH) -Fo$@ $<
<<


##############
# build rules
##############

#
# Add explicit dependency on url.lib.
#

$(OUT_MODULE): $(OHARE_ROOT)\lib\url.lib

!if "$(BUILD)" == "debug"

#
# Build xx_debug.dll.
#

..\xx_debug\xx_debug.lib:
    cd ..\xx_debug
    $(MAKE) -$(MAKEFLAGS)
    cd ..\core
!endif

!ifdef DBCS
#
# Build fechrcnv.dll.
#
..\fechrcnv\fechrcnv.lib:
    cd ..\fechrcnv
    $(MAKE) IEXPLORE=YES -$(MAKEFLAGS)
    cd ..\core
!endif

!ifdef JPEGLIB
#
# Build jpeglib.lib.
#
..\jpeglib\jpeglib.lib:
    cd ..\jpeglib
    $(MAKE) -$(MAKEFLAGS)
    cd ..\core
!endif

!endif    # !if NTMAKEENV
